<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø±Ø± Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</title>
    
    <style>
        /* ØªØ®Ø·ÙŠØ· Ù…Ø±Ù† (Mobile First) */
        body { 
            margin: 0; 
            font-family: Arial, sans-serif; 
            height: 100vh; 
            overflow: hidden; /* Ù„Ù…Ù†Ø¹ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
            display: flex;
            flex-direction: column; /* Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù…ÙˆØ¯ÙŠ Ù„Ù„Ù‡Ø§ØªÙ */
        }
        
        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø­Ø±Ø± ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª */
        #editor-controls-wrapper {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #1e1e1e;
            color: #d4d4d4;
            box-sizing: border-box;
            padding: 10px;
        }

        /* Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        #code-input-box {
            flex-grow: 1; /* ÙŠØ³ØªÙ‡Ù„Ùƒ ÙƒÙ„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ */
            min-height: 200px;
            padding: 15px;
            background-color: #252526;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            border: none;
            box-sizing: border-box;
            outline: none;
        }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ */
        .controls-panel {
            display: flex;
            gap: 10px;
            padding: 10px 0;
            flex-wrap: wrap; /* Ù„Ù„Ø§Ù„ØªÙØ§Ù Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ */
        }
        button {
            padding: 10px 15px;
            background-color: #007acc;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
        }

        /* Ù„ÙˆØ­Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± */
        .image-upload-panel {
            padding-bottom: 10px;
            border-bottom: 1px solid #3c3c3c;
        }
        .image-upload-panel h4 {
            margin: 5px 0;
            color: #c586c0;
        }
        #base64-output {
            width: 100%;
            min-height: 40px;
            margin-top: 5px;
            font-size: 10px;
            background-color: #333;
            color: #ccc;
            border: none;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© (ØªØ¸Ù‡Ø± Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©) */
        #full-preview-container {
            width: 100%;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            background-color: white;
            z-index: 1000;
            display: none; /* Ù…Ø®ÙÙŠ Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ */
            flex-direction: column;
        }
        #live-preview-frame {
            width: 100%;
            flex-grow: 1;
            border: none;
        }
        #exit-button {
            background-color: #dc3545;
            padding: 10px;
            margin: 10px;
        }
    </style>
</head>
<body>

    <div id="editor-controls-wrapper">
        
        <div class="image-upload-panel">
            <h4>ğŸ–¼ï¸ ØªØ­ÙˆÙŠÙ„ ØµÙˆØ±Ø© Base64</h4>
            <input type="file" id="image-input" accept="image/*" onchange="handleImageUpload()">
            <textarea id="base64-output" placeholder="Ø³ÙŠØ¸Ù‡Ø± Ø±Ø§Ø¨Ø· Base64 Ù‡Ù†Ø§."></textarea>
        </div>

        <textarea id="code-input-box" oninput="runCode()">
<!DOCTYPE html>
<html>
<head>
    <style>
        h1 { color: #007acc; font-size: 40px; }
    </style>
</head>
<body>
    <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø­Ø±Ø± Ø§Ù„Ø°ÙƒÙŠ!</h1>
    <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ (HTML, CSS, JS) ØªÙˆØ¶Ø¹ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ§Ø­Ø¯.</p>
    
    <script>
        document.querySelector('h1').textContent += ' (Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©)';
    </script>
</body>
</html>
        </textarea>
        
        <div class="controls-panel">
            <button onclick="togglePreview(true)">ğŸ” Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</button>
            <button onclick="copyCode()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ ÙƒØ§Ù…Ù„Ø§Ù‹</button>
        </div>
    </div>

    <div id="full-preview-container">
        <button id="exit-button" onclick="togglePreview(false)">âŒ Ø®Ø±ÙˆØ¬ ÙˆØ¹ÙˆØ¯Ø© Ù„Ù„ØªØ­Ø±ÙŠØ±</button>
        <iframe id="live-preview-frame"></iframe>
    </div>

    <script>
        // *** 1. Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ***
        function runCode() {
            const code = document.getElementById('code-input-box').value;
            // ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙƒØ§Ù…Ù„Ø§Ù‹ØŒ ÙˆÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ¶Ù…Ù† ÙˆØ³ÙˆÙ… <style> Ùˆ <script>
            document.getElementById('live-preview-frame').srcdoc = code;
        }

        // *** 2. Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø±Ø± ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ***
        function togglePreview(showPreview) {
            const editorWrapper = document.getElementById('editor-controls-wrapper');
            const previewContainer = document.getElementById('full-preview-container');

            if (showPreview) {
                // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©: Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø­Ø±Ø± ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
                editorWrapper.style.display = 'none';
                previewContainer.style.display = 'flex';
                // ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¢Ø®Ø± Ù…Ø±Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
                runCode(); 
            } else {
                // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­Ø±Ø± ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
                editorWrapper.style.display = 'flex';
                previewContainer.style.display = 'none';
            }
        }

        // *** 3. Ø¯Ø§Ù„Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© (Base64) ***
        function handleImageUpload() {
            const file = document.getElementById('image-input').files[0];
            const outputArea = document.getElementById('base64-output');

            if (!file) { outputArea.value = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©.'; return; }

            const reader = new FileReader();
            reader.onload = function(e) {
                outputArea.value = e.target.result;
                outputArea.select(); 
                navigator.clipboard.writeText(e.target.result)
                    .then(() => {
                        alert('âœ… ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© ÙˆÙ†Ø³Ø® Ø±Ø§Ø¨Ø· Base64 ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹! Ø§Ù„Ø¢Ù† Ø§Ù„ØµÙ‚Ù‡ ÙÙŠ Ø®Ø§ØµÙŠØ© src Ù„Ù€ <img>.');
                    })
                    .catch(err => {
                        alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ ÙŠØ¬Ø¨ Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Base64 ÙŠØ¯ÙˆÙŠØ§Ù‹.');
                    });
            };
            reader.readAsDataURL(file); 
        }

        // *** 4. Ø¯Ø§Ù„Ø© Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ ***
        function copyCode() {
            const code = document.getElementById('code-input-box').value;
            navigator.clipboard.writeText(code)
                .then(() => alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ ÙƒØ§Ù…Ù„Ø§Ù‹ Ø¨Ù†Ø¬Ø§Ø­!'))
                .catch(err => alert('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù†Ø³Ø®.'));
        }
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        runCode();
    </script>
</body>
</html>
